<!DOCTYPE html>
<html>
<body>

<button class="btn-check hidden" id="btnCheck">CHECKLIST</button>

<script>
const BASE =
  "https://travasoventurelli-default-rtdb.europe-west1.firebasedatabase.app";

btnCheck.onclick = async () => {
 alert("CLICK");
  await fetch(BASE + "/cmd.json", {
    method: "PUT",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify("checklist")
  });
  alert("CMD SCRITTO SU FIREBASE");

};

setInterval(async () => {
  const r = await fetch(BASE + "/ui/open_checklist.json");
  const ok = await r.json();

  if (ok === true) {
    // consumalo
    await fetch(BASE + "/ui/open_checklist.json", {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(null)
    });

    window.location.href = "checklist.html";
  }
}, 500);



</script>

</body>
</html>
