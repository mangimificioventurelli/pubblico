<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bilancia Test</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #111;
    color: #fff;
  }

  .app {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    gap: 28px;
  }

  #peso {
    font-size: 72px;
    font-weight: bold;
  }

  #stato {
    font-size: 36px;
    padding: 12px 24px;
    border-radius: 12px;
    background: #222;
  }

  .buttons {
    display: flex;
    flex-direction: column;
    gap: 24px;
    width: 80%;
    max-width: 360px;
  }

  button {
    height: 72px;
    font-size: 26px;
    font-weight: bold;
    border-radius: 18px;
    border: none;
    color: white;
    touch-action: manipulation;
  }

  .btn-start { background: #00a84f; }
  .btn-stop  { background: #d72626; }
  .btn-reset { background: #555; }
  .btn-check { background: #0077ff; }

  button:active {
    transform: scale(0.97);
    opacity: 0.85;
  }
</style>
</head>

<body>

<div class="app">
  <div id="peso">123.45</div>
  <div id="stato">STATO: automatico</div>
  <div class="buttons">
    <button class="btn-start" onclick="alert('START premuto')">START</button>
    <button class="btn-stop" onclick="alert('STOP premuto')">STOP</button>
    <button class="btn-reset" onclick="alert('RESET premuto')">RESET ALLARMI</button>
    <button class="btn-check" onclick="alert('CHECKLIST premuto')">CHECKLIST</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const btnStart = document.querySelector(".btn-start");
  const btnStop  = document.querySelector(".btn-stop");
  const btnReset = document.querySelector(".btn-reset");
  const btnCheck = document.querySelector(".btn-check");

  // funzione per mostrare/nascondere bottoni in base allo stato
  function aggiornaUI(stato) {
    if (!stato) return;

    // rimuovo prefisso "STATO: " se presente
    if (stato.toUpperCase().startsWith("STATO:")) {
      stato = stato.substring(7).trim();
    }

    stato = stato.toLowerCase();

    const operativo = ["marcia","automatico","svuotamento"].includes(stato);

    btnStart.style.display = operativo ? "block" : "none";
    btnStop.style.display  = operativo ? "block" : "none";
    btnReset.style.display = "block";
    btnCheck.style.display = (stato === "automatico") ? "block" : "none";
  }

  // test manuale: cambia stato ogni 3 secondi
  let stati = ["marcia","automatico","svuotamento","manutenzione"];
  let i = 0;
  setInterval(() => {
    const s = stati[i % stati.length];
    document.getElementById("stato").innerText = "STATO: " + s;
    aggiornaUI(document.getElementById("stato").innerText);
    i++;
  }, 3000);

  // inizializza UI correttamente al primo caricamento
  aggiornaUI(document.getElementById("stato").innerText);
});
</script>

</body>
</html>
