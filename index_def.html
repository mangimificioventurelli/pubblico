<script>
document.addEventListener("DOMContentLoaded", () => {
  const btnStart = document.querySelector(".btn-start");
  const btnStop  = document.querySelector(".btn-stop");
  const btnReset = document.querySelector(".btn-reset");
  const btnCheck = document.querySelector(".btn-check");

  // funzione per mostrare/nascondere bottoni in base allo stato
  function aggiornaUI(stato) {
    if (!stato) return;

    stato = stato.toLowerCase();

    const operativo = ["marcia","automatico","svuotamento"].includes(stato);

    btnStart.style.display = operativo ? "block" : "none";
    btnStop.style.display  = operativo ? "block" : "none";
    btnReset.style.display = "block";
    btnCheck.style.display = (stato === "automatico") ? "block" : "none";
  }

  // collegamento bottone CHECKLIST
  btnCheck.addEventListener("click", () => {
    window.location.href = "checklist.html";  // apre la checklist
  });

  // test automatico: cambia stato ogni 3 secondi
  let stati = ["marcia","automatico","svuotamento","manutenzione"];
  let i = 0;
  setInterval(() => {
    const s = stati[i % stati.length];
    document.getElementById("stato").innerText = s;
    aggiornaUI(s);
    i++;
  }, 3000);

  // inizializza UI correttamente al primo caricamento
  aggiornaUI(document.getElementById("stato").innerText);
});
</script>
